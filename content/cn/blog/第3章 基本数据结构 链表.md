---
categories: Python æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ(ç¬¬2ç‰ˆ)
title: ç¬¬3ç«  åŸºæœ¬æ•°æ®ç»“æ„ é“¾è¡¨
tags: [ ä¹¦ç±, python]
date: 2023-03-13
lastmod: 2023-03-21 
thumbnail:  
published: "true"
slug: 3thbvz1
---


## 1 å®ç°æ€è·¯

```plantuml
@startuml  
title é“¾è¡¨ç±»çš„ç»“æ„å›¾
start
split    
    :Node ç±»;    
    note left
        å®šä¹‰ä¸¤ä¸ªå±æ€§:
        _value å’Œ _next
    end note
    kill
split again    
    :UnorderedList ç±»;
    note right
        å±æ€§ï¼šhead,length
        æ–¹æ³•ï¼šisEmpty,add,search,
            remove,append,insert,
            index,pop
        é‡å†™æ–¹æ³•ï¼š__str__
    end note
    :UnorderedList_pro ç±»;
    note right
        ç»§æ‰¿è‡ª UnorderedList ç±»
        ç›®çš„ï¼šappend çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)
        æ–°å¢å±æ€§ï¼šrear
        é‡å†™æ–¹æ³•ï¼šadd,remove,append,insert,pop
    end note
    :OrderedList_pro ç±»;
    note left
        ç»§æ‰¿è‡ª UnorderedList_pro ç±»
        ç›®çš„ï¼šå®ç°æœ‰åºé“¾è¡¨        
        é‡å†™æ–¹æ³•ï¼šadd,search,append,insert
    end note
    kill
@enduml
```

## 2 å®Œæ•´ä»£ç 

```python
class Node:
    def __init__(self,item):
        self._value = item
        self._next = None

		def getValue(self):
        return self._value

    def getNext(self):
        return self._next

    def setValue(self,item):
        self._value = item

    def setNext(self,node):
        self._next = node

class UnorderedList:
    def __init__(self):
        self.head = None
        self.length = 0        

    def isEmpty(self):
        return self.head == None

    def add(self,item):
        node = Node(item)        
        current = self.head        
        self.head = node
        node.setNext(current)
        self.length += 1

    def search(self,item):
        current = self.head
        founded = False
        while current and not founded:
            if current.getValue() == item:
                founded = True
            else:
                current = current.getNext()
        return founded

    def remove(self,item):        
        current = self.head
        pre = None
        while current and current.getValue() != item:
            pre = current
            current = current.getNext()
        if not current:
            return False
        elif not pre:
            self.head = current.getNext()
        else:            
						pre.setNext(current.getNext())      
        self.length -= 1
            
    def append(self,item):
        node = Node(item)
        current = self.head
        if not current:
            self.head = node
        else:
            while current.getNext():
                current = current.getNext()
        current.setNext(node)
        self.length += 1    

    def insert(self,index,item):
        node = Node(item)
        current = self.head
        pos = 0       
        if self.isEmpty():
            self.head = node
        elif index == 0:
            self.head = node
            node._next = current
        else:
            pre = None        
            while pos < index and current:
                pos += 1
                pre = current
                current = current._next            
            pre._next = node
            node._next = current
        self.length += 1            

    def index(self,item):
        current = self.head
        pos = 0
        while current and current._value != item:
            pos += 1
            current = current._next
        if not current:
            return False
        else:
            return pos

    def pop(self,index=0):
        current = self.head
        pos = 0
        if not current:
            return False
        else:
            pre = None
            while current._next and pos<index:
                pos += 1
                pre = current
                current = current._next
            if pos == index:
                if not pre:                                   
                    self.head = current._next                                   
                else:
                    pre._next = current._next
                return current._value
            else:
                return False

		def assign(self,index,item):
        current = self.head
        pos = 0
        while current and pos<index:
            pos += 1
            current = current._next
        if not current:
            return False
        else:            
            current._value = item
        
    def __str__(self):
        value_list = []
        current = self.head
        while current:
            value_list.append(current._value)
            current = current._next
        return '{}'.format(value_list)

class UnorderedList_pro(UnorderedList):
    def __init__(self):
        super().__init__()
        self.rear = None   #è®¾ç½®è¿™ä¸ªå˜é‡ï¼Œæ˜¯ä¸ºäº†å®šä½å°¾éƒ¨ï¼Œå®ç° append çš„æ—¶é—´å¤æ‚åº¦O(1)

    def add(self,item):
        node = Node(item)        
        current = self.head
        if self.isEmpty():    #è¿™æ˜¯æ–°å¢çš„
            self.rear = node
        self.head = node
        node._next = current
        self.length += 1

    def remove(self,item):        
        current = self.head
        pre = None
        while current and current._value != item:
            pre = current
            current = current._next
        if not current:
            return False
        elif not pre:
            self.head = current._next
        else:
            pre._next = current._next
        if not current._next:
            self.rear = pre   #è¿™æ˜¯æ–°å¢çš„
        self.length -= 1

    def append(self,item):
        node = Node(item)
        if self.rear:
            self.rear._next = node
            self.rear = node
        else:
            self.head = node
            self.rear = node

    def insert(self,index,item):
        node = Node(item)
        current = self.head
        pos = 0
        if index >= self.length:
            self.rear = node     #è¿™æ˜¯æ–°å¢çš„
        if self.isEmpty():
            self.head = node
        elif index == 0:
            self.head = node
            node._next = current
        else:
            pre = None        
            while pos < index and current:
                pos += 1
                pre = current
                current = current._next            
            pre._next = node
            node._next = current
        self.length += 1

    def pop(self,index=0):
        current = self.head
        pos = 0
        if not current:
            return False
        else:
            pre = None
            while current._next and pos<index:
                pos += 1
                pre = current
                current = current._next
            if pos == index:
                if not pre:                                   
                    self.head = current._next
                else:
                    pre._next = current._next                                 
                if not current._next:
                    self.rear = pre                                   
                return current._value
            else:
                return False

class OrderedList(UnorderedList_pro):
    def __init__(self):
        super().__init__()

    def add(self,item):
        node = Node(item)        
        current = self.head
        if self.isEmpty():
            self.rear = node
            self.head = node
        else:
            current = self.head
            pre = None
            while current._value < item and current._next:
                pre = current
                current = current._next
            if not pre:
                self.head = node
                node._next = current
            elif not current._next:
                current._next = node
            else:                
                pre._next = node
                node._next = current        
        self.length += 1       

```

## 3 é“¾è¡¨æ“ä½œçš„æ—¶é—´å¤æ‚åº¦

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | æ³¨é‡Š |
| --- | --- | --- |
| isEmpty() | O(1) | åªéœ€æ‰§è¡Œä¸€æ­¥æ“ä½œï¼Œå³æ£€æŸ¥ head å¼•ç”¨æ˜¯å¦ä¸º None |
| length | O(1) | è¿™æ˜¯ä¸€ä¸ªå±æ€§å˜é‡ï¼Œå½“å‡ºç°é“¾è¡¨é•¿åº¦å‘ç”Ÿå˜åŒ–çš„æ“ä½œæ—¶ï¼Œlength å¢å‡ |
| æ— åºé“¾è¡¨çš„add() | O(1) | æ–°èŠ‚ç‚¹æ€»åœ¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªä½ç½® |
| æœ‰åºé“¾è¡¨çš„add() | O(n) | éœ€è¦éå†é“¾è¡¨ï¼Œæ‰¾åˆ°åˆé€‚çš„ä½ç½® |
| seach() | O(n) |  |
| remove() | O(n) |  |
| æ— åºé“¾è¡¨çš„append() | O(n)ã€O(1) | å½“å¢åŠ å°¾éƒ¨æŒ‡é’ˆå˜é‡æ—¶ï¼Œappend() çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1) |
| æ— åºé“¾è¡¨çš„insert() | O(n) |  |
| index() | O(n) |  |
| pop(index) | O(n) |  |
| pop() | O(1) | æ­¤æ—¶ï¼Œåªå¯¹é“¾è¡¨å¤´æ“ä½œï¼Œä¸éœ€è¦éå† |
| æ— åºé“¾è¡¨çš„èµ‹å€¼ assign(index,item) | O(n) | éœ€è¦éå†é“¾è¡¨ï¼Œæ‰¾åˆ°ä½ç½® index |

>æ³¨æ„ï¼š
>åœ¨åˆ†æé“¾è¡¨æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ—¶ï¼Œè¦è€ƒè™‘å…¶æ˜¯å¦éœ€è¦éå†ã€‚
†ã€‚
