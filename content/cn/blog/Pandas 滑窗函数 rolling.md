---
categories: Pandas
title: Pandas æ»‘çª—å‡½æ•° rolling
tags: [ æ•™ç¨‹, python]
date: 2023-03-17
lastmod: 2023-03-21
thumbnail: https://s1.vika.cn/space/2023/03/25/5d40f115ac02485db5c50e59aca0e40d?attname=fall-7863868_960_720.webp
published: "true"
slug: 8x3r7ee
---


## 1 æ»‘çª—å‡½æ•° rolling å¸¸è§å‚æ•°ï¼š

```python
DataFrame.rolling(window, min_periods=None,center=False, on=None, axis=0)
```

## 2 windowï¼š

è¡¨ç¤ºæ—¶é—´çª—çš„å¤§å°ï¼Œæ³¨æ„æœ‰ä¸¤ç§å½¢å¼ï¼ˆint or offsetï¼‰ã€‚å¦‚æœä½¿ç”¨intï¼Œåˆ™æ•°å€¼è¡¨ç¤ºè®¡ç®—ç»Ÿè®¡é‡çš„è§‚æµ‹å€¼çš„æ•°é‡å³å‘å‰å‡ ä¸ªæ•°æ®ã€‚å¦‚æœæ˜¯offsetç±»å‹ï¼Œè¡¨ç¤ºæ—¶é—´çª—çš„å¤§å°ï¼Œå¦‚'30D'ï¼Œè¡¨ç¤º30å¤©ã€‚

## 3 min_periodsï¼š

æœ€å°‘éœ€è¦æœ‰å€¼çš„è§‚æµ‹ç‚¹çš„æ•°é‡ï¼Œå¯¹äºintç±»å‹ï¼Œé»˜è®¤ä¸windowç›¸ç­‰ã€‚å¯¹äºoffsetç±»å‹ï¼Œé»˜è®¤ä¸º1ã€‚

## 4 centerï¼š

æ˜¯å¦ä½¿ç”¨windowçš„ä¸­é—´å€¼ä½œä¸ºlabelï¼Œé»˜è®¤ä¸ºfalseã€‚åªèƒ½åœ¨windowæ˜¯intæ—¶ä½¿ç”¨ã€‚

## 5 onï¼š

å¯¹äºDataFrameå¦‚æœä¸ä½¿ç”¨indexï¼ˆç´¢å¼•ï¼‰ä½œä¸ºrollingçš„åˆ—ï¼Œé‚£ä¹ˆç”¨onæ¥æŒ‡å®šä½¿ç”¨å“ªåˆ—ã€‚

## 6 axisï¼š

æ–¹å‘ï¼ˆè½´ï¼‰ï¼Œä¸€èˆ¬éƒ½æ˜¯0ã€‚

```python
s= pd.Series([100, 90, 110, 150, 110, 130, 80, 90, 100, 150])
s.rolling(3)
```

ç»“æœç¤ºæ„å¦‚ä¸‹ï¼šèƒ½å¤Ÿä½¿ç”¨ç›¸åº”çš„èšåˆå‡½æ•°è¿›è¡Œè®¡ç®—ï¼Œè¿˜æ”¯æŒä½¿ç”¨Â applyÂ ä¼ å…¥è‡ªå®šä¹‰å‡½æ•°ï¼Œå…¶ä¼ å…¥å€¼æ˜¯å¯¹åº”çª—å£çš„Â Seriesã€‚

![image.png](https://s1.vika.cn/space/2023/03/17/f841caee0afd4a10bfe18be5a80b4ee4)


```python
s.rolling(3).mean()
#ä¸‹é¢è¯­å¥ç­‰æ•ˆ
s.rolling(3).apply(lambda x:x.mean())
```

rollingå‡½æ•°æ˜¯å‘ä¸‹æ»‘è¡Œï¼Œå¦‚æœéœ€è¦å‘ä¸Šæ»‘è¡Œï¼Œåˆ™éœ€è¦å°†åºåˆ—å€’åºã€‚

shift,Â diff,Â pct_changeÂ æ˜¯ä¸€ç»„ç±»æ»‘çª—å‡½æ•°ï¼Œå®ƒä»¬çš„å…¬å…±å‚æ•°ä¸ºperiods=nÂ ï¼Œé»˜è®¤ä¸º1ï¼Œåˆ†åˆ«è¡¨ç¤ºå–å‘å‰ç¬¬nÂ ä¸ªå…ƒç´ çš„å€¼ã€ä¸å‘å‰ç¬¬Â nÂ ä¸ªå…ƒç´ åšå·®ï¼ˆä¸Â NumpyÂ ä¸­ä¸åŒï¼Œåè€…è¡¨ç¤ºÂ nÂ é˜¶å·®åˆ†ï¼‰ã€ä¸å‘å‰ç¬¬Â nÂ ä¸ªå…ƒç´ ç›¸æ¯”è®¡ç®—å¢é•¿ç‡ã€‚è¿™é‡Œçš„Â nÂ å¯ä»¥ä¸ºè´Ÿï¼Œè¡¨ç¤ºåæ–¹å‘çš„ç±»ä¼¼æ“ä½œã€‚
½œã€‚
